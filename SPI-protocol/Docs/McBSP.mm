<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1566831599981" ID="ID_824083590" MODIFIED="1566895155818" TEXT="Driver communicate ZynQ 7000 to TMS320C5509A ">
<node CREATED="1566832236332" FOLDED="true" HGAP="-20" ID="ID_914337848" MODIFIED="1566899715504" POSITION="right" TEXT="Analysis of the problem" VSHIFT="-1">
<node CREATED="1566832146980" HGAP="16" ID="ID_1275109672" MODIFIED="1566889388675" TEXT="Problem" VSHIFT="-24">
<node CREATED="1566832159484" ID="ID_1912035315" MODIFIED="1566832231488" TEXT="Driver communicate ZynQ 7000 to DSP TMS320C5509A"/>
<node CREATED="1566832283820" ID="ID_1995499889" MODIFIED="1566832294837" TEXT="Use McBSP port"/>
</node>
<node CREATED="1566889341539" ID="ID_27097113" MODIFIED="1566889378819" TEXT="Objects" VSHIFT="-12">
<node CREATED="1566832251172" FOLDED="true" ID="ID_1123849696" MODIFIED="1566896176760" TEXT="How about ZynQ 7000 ?">
<node CREATED="1566895753912" ID="ID_1760705765" MODIFIED="1566895773506" TEXT="Is the SoC integrate of ARM and FPGA"/>
<node CREATED="1566895813060" ID="ID_1052366406" MODIFIED="1566895849063" TEXT="Can use with Linux and Free RTOS"/>
<node CREATED="1566895869204" ID="ID_1291760906" MODIFIED="1566895901072" TEXT="2 x UART, 2 x CAN 2.0B, 2 x I2C, 2 x SPI, 4 x GPIO"/>
</node>
<node CREATED="1566832256676" FOLDED="true" ID="ID_1877855617" MODIFIED="1566896177606" TEXT="How about DSP TMS320C5509A?">
<node CREATED="1566895509076" ID="ID_961663107" MODIFIED="1566895594539" TEXT="Is the DSP"/>
<node CREATED="1566895597081" ID="ID_698545369" MODIFIED="1566895601875" TEXT="Manufactured by TI"/>
<node CREATED="1566895417508" ID="ID_1611556356" MODIFIED="1566895418409" TEXT="Up to 3 Multichannel Buffered Serial Ports (McBSPs) "/>
</node>
<node CREATED="1566832314061" FOLDED="true" ID="ID_161787822" MODIFIED="1566896179392" TEXT="What&apos;s McBSP?">
<node CREATED="1566895928554" MODIFIED="1566895928554" TEXT="Mulitichannel Buffered Serial Port"/>
<node CREATED="1566895928556" MODIFIED="1566895928556" TEXT="Standard protocol"/>
<node CREATED="1566895928557" MODIFIED="1566895928557" TEXT="The primary use for the McBSP is for audio interface purposes"/>
<node CREATED="1566895928558" ID="ID_1811347668" MODIFIED="1566895928558" TEXT="The McBSP consists of a data path and a control path that connect to external devices."/>
<node CREATED="1566895928560" ID="ID_1151704709" MODIFIED="1566895928560" TEXT="Separate pins for transmission and reception communicate data to these external devices."/>
<node CREATED="1566895978282" ID="ID_558709031" MODIFIED="1566896007734" TEXT="McBSP signals - 6 lines">
<node CREATED="1566895987893" ID="ID_483408769" MODIFIED="1566895987893" TEXT="clock transmit - CLKX"/>
<node CREATED="1566895987903" MODIFIED="1566895987903" TEXT="clock receive- CLKR"/>
<node CREATED="1566895987905" MODIFIED="1566895987905" TEXT="frame sync transmit - FSX"/>
<node CREATED="1566895987906" MODIFIED="1566895987906" TEXT="frame sync receive - FSR"/>
<node CREATED="1566895987908" MODIFIED="1566895987908" TEXT="Data transmit - DX"/>
<node CREATED="1566895987909" MODIFIED="1566895987909" TEXT="Data receive - DR"/>
</node>
</node>
</node>
<node CREATED="1566832714706" HGAP="18" ID="ID_1720583873" MODIFIED="1566889387131" TEXT="How to comminicate between both devices?" VSHIFT="14"/>
</node>
<node CREATED="1566832453643" FOLDED="true" HGAP="-4" ID="ID_1032991571" MODIFIED="1566899711500" POSITION="right" TEXT="Solution" VSHIFT="-94">
<node CREATED="1566888904454" ID="ID_1898863760" MODIFIED="1566888932786" TEXT="Mcbsp connect with spi">
<node CREATED="1566896052423" ID="ID_1798201455" MODIFIED="1566896053524" TEXT="McBSP as SPI Slave"/>
<node CREATED="1566896060797" ID="ID_1321940828" MODIFIED="1566896061882" TEXT="McBSP as SPI Master"/>
</node>
<node CREATED="1566888939124" ID="ID_832403372" MODIFIED="1566888974504" TEXT="target: Write SPI driver on ZynQ to communicate with DSP"/>
</node>
<node CREATED="1566889258939" HGAP="-14" ID="ID_363051379" MODIFIED="1566899722019" POSITION="right" TEXT="SPI Driver on Linux" VSHIFT="99">
<node CREATED="1566893676948" ID="ID_1950444416" MODIFIED="1566893759639" TEXT="Introduction to SPI">
<node CREATED="1564804483064" HGAP="15" ID="ID_1265894441" MODIFIED="1566893745104" TEXT="What&apos;s SPI?" VSHIFT="12">
<node CREATED="1564804551350" ID="ID_1162202494" MODIFIED="1564804552006" TEXT="Serial Peripheral Interface "/>
<node CREATED="1564818169075" ID="ID_1641388061" MODIFIED="1564818243645" TEXT="4 wires signals"/>
<node CREATED="1564804555911" ID="ID_273665027" MODIFIED="1564804562546" TEXT="Motorola design"/>
<node CREATED="1564804563860" ID="ID_1071274911" MODIFIED="1566892869387" TEXT="Master - Slave"/>
<node CREATED="1564804587659" ID="ID_41656816" MODIFIED="1564804590425" TEXT="no maximum clock speed">
<font NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1564804610683" ID="ID_1300605320" MODIFIED="1566894352259" TEXT="Common uses of SPI">
<node CREATED="1564804617658" ID="ID_411548487" MODIFIED="1564804623840" TEXT="Flash memory"/>
<node CREATED="1564804625983" ID="ID_1521891781" MODIFIED="1564804628770" TEXT="ADCs"/>
<node CREATED="1564804631053" ID="ID_1692519379" MODIFIED="1564804641363" TEXT="LCD controllers"/>
<node CREATED="1564804642885" ID="ID_205245594" MODIFIED="1564804653172" TEXT="Sensors"/>
</node>
<node CREATED="1566893728256" ID="ID_1089749573" MODIFIED="1566893729200" TEXT="SPI signals "/>
<node CREATED="1566893732485" ID="ID_775969062" MODIFIED="1566893742696" TEXT="SPI Modes " VSHIFT="-13"/>
</node>
<node CREATED="1566889970429" FOLDED="true" ID="ID_202075340" MODIFIED="1566900725736" TEXT="SPI concepts on Linux">
<node CREATED="1566890255989" ID="ID_54925486" MODIFIED="1566890262197" TEXT="SPI protocol driver"/>
<node CREATED="1566890262671" ID="ID_689576136" MODIFIED="1566890267786" TEXT="SPI controller driver"/>
<node CREATED="1566892175838" ID="ID_508600936" MODIFIED="1566892208710" TEXT="spidev"/>
</node>
<node CREATED="1566893513050" FOLDED="true" ID="ID_1418059658" MODIFIED="1566900726503" TEXT="SPIDEV">
<node CREATED="1566893876404" ID="ID_801087758" MODIFIED="1566893934122" TEXT="Idea">
<node CREATED="1566893891854" ID="ID_972822319" MODIFIED="1566893919055" TEXT="Simplest for development and test"/>
</node>
<node CREATED="1566893854200" ID="ID_139650314" MODIFIED="1566893876308" TEXT="Enable spidev"/>
<node CREATED="1566900444262" ID="ID_169189737" MODIFIED="1566900449322" TEXT="drivers/spi/spidev.c"/>
</node>
<node CREATED="1564804269533" HGAP="24" ID="ID_333916510" MODIFIED="1566901137263" TEXT="SPI protocol driver" VSHIFT="34">
<node CREATED="1566893940923" ID="ID_558923791" MODIFIED="1566893943518" TEXT="Idea">
<node CREATED="1566893943519" ID="ID_1122911040" MODIFIED="1566893971930" TEXT="Support functions with special device"/>
</node>
<node CREATED="1566892330580" ID="ID_1554349748" MODIFIED="1566892343569" TEXT="Driver type">
<node CREATED="1564828640387" ID="ID_1994618309" MODIFIED="1564828650034" TEXT="character driver"/>
<node CREATED="1564804450695" ID="ID_1428730343" MODIFIED="1564804452808" TEXT="spi.h"/>
</node>
<node CREATED="1566901142695" ID="ID_1174422240" MODIFIED="1566901146064" TEXT="Implement">
<node CREATED="1564828655761" ID="ID_1588919844" MODIFIED="1564828661619" TEXT="Device tree">
<node CREATED="1564828662965" ID="ID_1840325560" MODIFIED="1564828694881" TEXT="add new child node into SPI node"/>
</node>
<node CREATED="1566894008654" ID="ID_718794616" MODIFIED="1566894015759" TEXT="instance">
<node CREATED="1564828734610" ID="ID_654692698" MODIFIED="1564828744366" TEXT="struct spi_device"/>
<node CREATED="1564828757717" ID="ID_1104655220" MODIFIED="1564828761375" TEXT="struct spi_driver"/>
<node CREATED="1564828720890" ID="ID_1386841752" MODIFIED="1564828725922" TEXT="spi_device_id"/>
<node CREATED="1564828727309" ID="ID_1570212550" MODIFIED="1564828730576" TEXT="of_device_id"/>
</node>
<node CREATED="1566901189618" FOLDED="true" ID="ID_588025781" MODIFIED="1566911367137" TEXT="API">
<node CREATED="1566901191593" ID="ID_1698377363" MODIFIED="1566901196613" TEXT="spi_setup()"/>
<node CREATED="1566901251972" ID="ID_1715474449" MODIFIED="1566901325424" TEXT="spi_write()"/>
<node CREATED="1566901315929" ID="ID_71148311" MODIFIED="1566901317616" TEXT="spi_read()"/>
<node CREATED="1566901339632" ID="ID_612955783" MODIFIED="1566901341146" TEXT="spi_w8r8 - SPI synchronous 8 bit write followed by 8 bit read"/>
<node CREATED="1566901351494" ID="ID_1479069866" MODIFIED="1566901352763" TEXT="spi_w8r16 - SPI synchronous 8 bit write followed by 16 bit read"/>
</node>
</node>
</node>
<node CREATED="1566893524091" ID="ID_1282187326" MODIFIED="1566901151015" TEXT="SPI Controller" VSHIFT="-60">
<node CREATED="1566896973986" ID="ID_1318531229" MODIFIED="1566896981606" TEXT="Idea">
<node CREATED="1566896981607" ID="ID_245080118" MODIFIED="1566897028833" TEXT="Configuration registers of SPI module"/>
</node>
<node CREATED="1566911177500" ID="ID_993181612" MODIFIED="1566911326188" TEXT="struct platform_driver"/>
<node CREATED="1566901153158" ID="ID_888224598" MODIFIED="1566901155834" TEXT="Implement">
<node CREATED="1566897030191" ID="ID_1631090314" MODIFIED="1566897034517" TEXT="instance">
<node CREATED="1566897034790" ID="ID_239500027" MODIFIED="1566897038812" TEXT="struct spi_master"/>
<node CREATED="1566901162277" ID="ID_688477295" MODIFIED="1566901166579" TEXT="struct spi_controller"/>
</node>
<node CREATED="1566897039898" FOLDED="true" ID="ID_1950999870" MODIFIED="1566911372379" TEXT="AIP">
<node CREATED="1566899725470" ID="ID_64317567" MODIFIED="1566899728249" TEXT="spi_alloc_master()"/>
<node CREATED="1566899853512" ID="ID_1986774818" MODIFIED="1566899855506" TEXT="omap2_mcspi_master_setup()"/>
<node CREATED="1566899844801" ID="ID_429323775" MODIFIED="1566899858827" TEXT="spi_master_put()"/>
<node CREATED="1566897064627" ID="ID_100436111" MODIFIED="1566897286799" TEXT="spi_register_master - register SPI master controller"/>
<node CREATED="1566900087407" ID="ID_1425294430" MODIFIED="1566900101868" TEXT="spi_unregister_controller() - unregister SPI master or slave controller"/>
</node>
</node>
</node>
<node CREATED="1566890312856" ID="ID_1060080035" MODIFIED="1566890335872" TEXT="Demo SPI protocol driver with LCD Nokia 5110"/>
</node>
</node>
</map>
