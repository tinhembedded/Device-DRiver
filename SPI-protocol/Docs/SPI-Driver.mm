<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1562233912715" ID="ID_1714994725" MODIFIED="1562233924826" TEXT="SPI Driver">
<node CREATED="1562253829172" HGAP="36" ID="ID_1598481289" MODIFIED="1565163549066" POSITION="right" TEXT="Beaglebone Black" VSHIFT="-10">
<node CREATED="1562253838638" ID="ID_1439371567" MODIFIED="1562253857070" TEXT="2 SPI"/>
<node CREATED="1562253987154" ID="ID_1721656542" MODIFIED="1562253988684" TEXT="Pin">
<node CREATED="1562253988973" ID="ID_1948457125" MODIFIED="1562253993556" TEXT="SPI_SCLK"/>
<node CREATED="1562253995075" ID="ID_976524508" MODIFIED="1562253998780" TEXT="SPI_D0"/>
<node CREATED="1562254000285" ID="ID_253673560" MODIFIED="1562254003133" TEXT="SPI_D1"/>
<node CREATED="1562254007163" ID="ID_86147897" MODIFIED="1562254012857" TEXT="SPI_CS0n"/>
<node CREATED="1562254016492" ID="ID_978544040" MODIFIED="1562254020202" TEXT="SPI_CS1n"/>
</node>
<node CREATED="1562258439595" ID="ID_791997791" MODIFIED="1562258442126" TEXT="McSPI supports any SPI word from 4 to 32 bits long"/>
<node CREATED="1562293649231" ID="ID_789335985" MODIFIED="1562293664073" TEXT="2 interrupt">
<node CREATED="1562293664894" ID="ID_300772441" MODIFIED="1562293669304" TEXT="Tx empty"/>
<node CREATED="1562293670741" ID="ID_795457997" MODIFIED="1562293674659" TEXT="Rx full"/>
</node>
<node CREATED="1562637656977" ID="ID_128841969" MODIFIED="1562637666662" TEXT="reference">
<node CREATED="1562637666861" ID="ID_1026238722" MODIFIED="1562637668115" TEXT="spi/spi-omap2-mcspi.c"/>
</node>
<node CREATED="1562655005272" HGAP="25" ID="ID_1545492867" MODIFIED="1562655011891" TEXT="target" VSHIFT="92">
<node CREATED="1562655011893" ID="ID_1589595799" MODIFIED="1562655018636" TEXT="master.c">
<node CREATED="1562656606339" ID="ID_1434453438" MODIFIED="1562656610481" TEXT="muxing mode pin"/>
<node CREATED="1562656612136" ID="ID_923123789" MODIFIED="1562656621139" TEXT="configure spi module"/>
</node>
<node CREATED="1562655020072" ID="ID_1751364754" MODIFIED="1562655022213" TEXT="slave.c"/>
</node>
<node CREATED="1562926502430" ID="ID_833533611" MODIFIED="1563324546049" TEXT="kernel file systerm">
<node CREATED="1562926518975" ID="ID_1100257428" MODIFIED="1562926533738" TEXT="/sys/class/spi_master">
<node CREATED="1562926537415" ID="ID_1958131516" MODIFIED="1562926539166" TEXT="spi1"/>
<node CREATED="1562926539453" ID="ID_1441501453" MODIFIED="1562926541298" TEXT="spi2"/>
</node>
<node CREATED="1562925889983" ID="ID_605859232" MODIFIED="1563324373613" TEXT="/sys/bus/spi/drivers/spi2.1">
<node CREATED="1563324400582" ID="ID_17931128" MODIFIED="1563324411901" TEXT="reg = 1 in devicetree"/>
</node>
<node CREATED="1562926457165" ID="ID_311493780" MODIFIED="1562926460366" TEXT="spidev">
<node CREATED="1562926421786" ID="ID_1348418775" MODIFIED="1562926429376" TEXT="/dev/spidev1.0"/>
<node CREATED="1562926463584" ID="ID_1512202777" MODIFIED="1562926475670" TEXT="/sys/class/spidev/"/>
</node>
<node CREATED="1563324453009" ID="ID_1212199510" MODIFIED="1563324503353" TEXT="/sys/bus/spi/devices/platform/ocp/480000.spi/spi_master/spi2/spi2.1"/>
<node CREATED="1563324546051" ID="ID_950977225" MODIFIED="1563324554415" TEXT="/sys/module/nokia5110"/>
</node>
<node CREATED="1563439042607" ID="ID_1593315222" MODIFIED="1563439047206" TEXT="TRACE">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1563439053581" ID="ID_381033300" MODIFIED="1563439296565" TEXT="devm_spi_register_master -&gt; spi_register_controller">
<node CREATED="1563439280411" ID="ID_28394314" MODIFIED="1564481358154" TEXT="of_register_spi_devices">
<node CREATED="1563439340909" ID="ID_809978892" MODIFIED="1563439343547" TEXT="-&gt; of_register_spi_device">
<node CREATED="1563439392939" ID="ID_914973480" MODIFIED="1563439425132" TEXT="-&gt; spi_add_device">
<node CREATED="1563439447705" ID="ID_1350128580" MODIFIED="1563439449160" TEXT="spi-&gt;cs_gpio = ctlr-&gt;cs_gpios[spi-&gt;chip_select];"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1562552827324" HGAP="55" ID="ID_1925176264" MODIFIED="1565163554531" POSITION="left" TEXT="SPI Driver" VSHIFT="-26">
<node CREATED="1563500617714" ID="ID_937570361" MODIFIED="1564803891495" TEXT="theory">
<node CREATED="1562552832889" HGAP="22" ID="ID_1094922172" MODIFIED="1565163607141" TEXT=" Controller drivers" VSHIFT="11">
<node CREATED="1562552835080" ID="ID_1026353292" MODIFIED="1562552858708" TEXT="configure hardware registers"/>
<node CREATED="1562554467204" ID="ID_1767214954" MODIFIED="1562554487885" TEXT="Usually is platform device">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1562559575276" ID="ID_1682495774" MODIFIED="1562559576478" TEXT="An SPI controller will probably be registered on the platform_bus"/>
<node CREATED="1562567679519" ID="ID_1537015551" MODIFIED="1562567688200" TEXT="SPI master method">
<node CREATED="1562567689101" ID="ID_902424557" MODIFIED="1562567691443" TEXT="setup">
<node CREATED="1562567699212" ID="ID_1018889084" MODIFIED="1562567724596" TEXT="sets up the device clock rate, SPI mode, and word sizes"/>
</node>
</node>
</node>
<node CREATED="1562552871539" HGAP="23" ID="ID_579271914" MODIFIED="1563500549771" TEXT="Protocol drivers" VSHIFT="1">
<node CREATED="1562552878542" ID="ID_1804557721" MODIFIED="1562552923788" TEXT="pass mesages through the controller driver to communicate with Slave or Master device on the other side of an SPI link "/>
</node>
<node CREATED="1562557039384" FOLDED="true" HGAP="22" ID="ID_1743303501" MODIFIED="1565163604540" TEXT="Structs relevant with SPI in kernel" VSHIFT="-172">
<node CREATED="1562903161462" ID="ID_1429195640" MODIFIED="1562903253870" TEXT="struct spi_master"/>
<node CREATED="1562903231112" ID="ID_1677730385" MODIFIED="1562903258769" TEXT="struct spi_driver"/>
<node CREATED="1562903232967" ID="ID_380628555" MODIFIED="1562903266569" TEXT="struct spi_device"/>
</node>
</node>
<node CREATED="1563258645231" HGAP="23" ID="ID_354902115" MODIFIED="1564803919284" TEXT="Demo Nokia 5110 with Beaglebone Black" VSHIFT="150">
<node CREATED="1563258676663" HGAP="15" ID="ID_1609524236" MODIFIED="1563500747077" TEXT="Protocol" VSHIFT="-82">
<node CREATED="1563422485703" ID="ID_1128990199" MODIFIED="1563422490858" TEXT="character driver">
<node CREATED="1563422491864" ID="ID_573002122" MODIFIED="1563422494949" TEXT="probe">
<node CREATED="1563422507029" ID="ID_1977532745" MODIFIED="1563422545066" TEXT="struct spi_device"/>
</node>
<node CREATED="1563422501892" ID="ID_1532453024" MODIFIED="1563422505004" TEXT="remove"/>
</node>
</node>
<node CREATED="1563437098365" HGAP="16" ID="ID_1285986209" MODIFIED="1563500750239" TEXT="Controller" VSHIFT="94">
<node CREATED="1563500702899" ID="ID_1415429728" MODIFIED="1563500758013" TEXT="Driver" VSHIFT="-12">
<node COLOR="#3300ff" CREATED="1563500713482" ID="ID_1574907423" MODIFIED="1563500806447" TEXT="Pin muxing">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1563500718337" ID="ID_1224084397" MODIFIED="1563500728883" TEXT="configuration registers"/>
</node>
<node CREATED="1563500706331" ID="ID_331508813" MODIFIED="1563785236540" TEXT="Device Tree">
<node CREATED="1563500732741" HGAP="18" ID="ID_61712525" MODIFIED="1563500755203" TEXT="add child node" VSHIFT="32"/>
</node>
</node>
</node>
</node>
<node CREATED="1564827555316" ID="ID_161305943" MODIFIED="1564827567535" POSITION="right" TEXT="SPI can be more complicated">
<node CREATED="1564827617205" ID="ID_713409089" MODIFIED="1564827628278" TEXT="Multiple Slave"/>
<node CREATED="1564827653226" ID="ID_789633041" MODIFIED="1564827679450" TEXT="3 wires"/>
</node>
<node CREATED="1564803906896" HGAP="-32" ID="ID_1339044240" MODIFIED="1564804049489" POSITION="right" TEXT="Document" VSHIFT="922">
<node CREATED="1564804058424" HGAP="12" ID="ID_583090254" MODIFIED="1564829568993" TEXT="Introduct SPI protocol" VSHIFT="-63">
<node CREATED="1564804483064" ID="ID_1278550239" MODIFIED="1564817890427" TEXT="What&apos;s SPI"/>
<node CREATED="1564804610683" ID="ID_1956016825" MODIFIED="1564804617420" TEXT="Common uses of SPI"/>
<node CREATED="1564818107477" ID="ID_525480988" MODIFIED="1564818119182" TEXT="SPI signals"/>
<node CREATED="1564826896638" ID="ID_1630184691" MODIFIED="1564826924860" TEXT="4 Mode"/>
<node CREATED="1564827519450" ID="ID_1810072052" MODIFIED="1564829574415" TEXT="Timing diagram"/>
<node CREATED="1564827555316" ID="ID_320562364" MODIFIED="1564827567535" TEXT="SPI can be more complicated"/>
</node>
<node CREATED="1564804483064" ID="ID_1265894441" MODIFIED="1564817890427" TEXT="What&apos;s SPI">
<node CREATED="1564804551350" ID="ID_1162202494" MODIFIED="1564804552006" TEXT="Serial Peripheral Interface "/>
<node CREATED="1564818169075" ID="ID_1641388061" MODIFIED="1564818243645" TEXT="4 wires signals"/>
<node CREATED="1564804555911" ID="ID_273665027" MODIFIED="1564804562546" TEXT="Motorola design"/>
<node CREATED="1564804563860" ID="ID_1071274911" MODIFIED="1564804575497" TEXT="Master mode - Slave mode"/>
<node CREATED="1564804587659" ID="ID_41656816" MODIFIED="1564804590425" TEXT="no maximum clock speed">
<font NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1564804610683" ID="ID_1300605320" MODIFIED="1564804617420" TEXT="Common uses of SPI">
<node CREATED="1564804617658" ID="ID_411548487" MODIFIED="1564804623840" TEXT="Flash memory"/>
<node CREATED="1564804625983" ID="ID_1521891781" MODIFIED="1564804628770" TEXT="ADCs"/>
<node CREATED="1564804631053" ID="ID_1692519379" MODIFIED="1564804641363" TEXT="LCD controllers"/>
<node CREATED="1564804642885" ID="ID_205245594" MODIFIED="1564804653172" TEXT="Sensors"/>
</node>
<node CREATED="1564818107477" ID="ID_1214800789" MODIFIED="1564818119182" TEXT="SPI signals"/>
<node CREATED="1564826896638" ID="ID_511732949" MODIFIED="1564826924860" TEXT="4 Mode"/>
<node CREATED="1564827519450" ID="ID_85054769" MODIFIED="1564829566427" TEXT="Timing diagram"/>
<node CREATED="1564827878791" ID="ID_1623433" MODIFIED="1564827892072" TEXT="Linux SPI concepts" VSHIFT="-210">
<node CREATED="1564827897357" ID="ID_869802952" MODIFIED="1564827902455" TEXT="Linux SPI drivers">
<node CREATED="1564827902856" ID="ID_1317945160" MODIFIED="1564828620309" TEXT="Controller Driver - Bus driver"/>
<node CREATED="1564827912073" ID="ID_82141781" MODIFIED="1564828625993" TEXT="Protocol Driver - Device driver"/>
<node CREATED="1564828410215" ID="ID_1194013824" MODIFIED="1564828419959" TEXT="Userspace Driver - spidev">
<node CREATED="1564828426425" ID="ID_1187108605" MODIFIED="1564828441534" TEXT="primary for development and test"/>
<node CREATED="1564828455581" ID="ID_81132024" MODIFIED="1564828514933" TEXT="requires special string compatible in device tree"/>
</node>
</node>
</node>
<node CREATED="1564804088551" HGAP="21" ID="ID_604445149" MODIFIED="1564828635659" TEXT="Implement SPI driver in Linux kernel" VSHIFT="-56">
<node CREATED="1564804259555" ID="ID_1834661103" MODIFIED="1564828856588" TEXT="SPI controller driver " VSHIFT="18"/>
<node CREATED="1564804269533" HGAP="24" ID="ID_333916510" MODIFIED="1564828854413" TEXT="SPI protocol driver" VSHIFT="40">
<node CREATED="1564804450695" ID="ID_1428730343" MODIFIED="1564804452808" TEXT="spi.h"/>
<node CREATED="1564828640387" ID="ID_1994618309" MODIFIED="1564828650034" TEXT="character driver"/>
<node CREATED="1564828655761" ID="ID_1588919844" MODIFIED="1564828661619" TEXT="Device tree">
<node CREATED="1564828662965" ID="ID_1840325560" MODIFIED="1564828694881" TEXT="add new child node into SPI node"/>
</node>
<node CREATED="1564828720890" ID="ID_1386841752" MODIFIED="1564828725922" TEXT="spi_device_id"/>
<node CREATED="1564828727309" ID="ID_1570212550" MODIFIED="1564828730576" TEXT="of_device_id"/>
<node CREATED="1564828734610" ID="ID_654692698" MODIFIED="1564828744366" TEXT="struct spi_device"/>
<node CREATED="1564828757717" ID="ID_1104655220" MODIFIED="1564828761375" TEXT="struct spi_driver"/>
</node>
</node>
<node CREATED="1564804118957" ID="ID_127067342" MODIFIED="1564804141007" TEXT="Demo SPI driver with LCD Nokia 5110">
<node CREATED="1564804321690" ID="ID_1074768121" MODIFIED="1564804325461" TEXT="Controller driver"/>
<node CREATED="1564804327033" HGAP="21" ID="ID_312532193" MODIFIED="1564828777101" TEXT="Protocol driver - Nokia 5110 driver" VSHIFT="8"/>
</node>
</node>
</node>
</map>
